<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Alien::Base::ModuleBuild::Authoring</title>
    <script type="text/javascript" src="https://shjs.wdlabs.com/sh_main.min.js"></script>
    <script type="text/javascript" src="https://shjs.wdlabs.com/lang/sh_perl.min.js"></script>
    <link type="text/css" rel="stylesheet" href="https://shjs.wdlabs.com/css/sh_acid.css">
    <link type="text/css" rel="stylesheet" href="https://hatch.wdlabs.com/css/default.css">
  </head>
  <body onload="sh_highlightDocument();">
    <div class="nx-header-flag-1"></div>
    <div class="nx-header-flag-2"></div>
    <div class="nx-header-title"><a href="/">ðŸŒ»</a> <a href="/pod/">ðŸ“–</a> <a href="/pod/Alien.html">Alien</a>::<a href="/pod/Alien/Base.html">Base</a>::<a href="/pod/Alien/Base/ModuleBuild.html">ModuleBuild</a>::Authoring</div>
    <!--Alien::Base::ModuleBuild::Authoring--><a name='___top' class='dummyTopAnchor' ></a>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#STATUS'>STATUS</a>
  <li class='indexItem indexItem1'><a href='#ECOSYSTEM'>ECOSYSTEM</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Alien%3A%3ABase%3A%3AModuleBuild'>Alien::Base::ModuleBuild</a>
    <li class='indexItem indexItem2'><a href='#Alien%3A%3ABase'>Alien::Base</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Alien%3A%3ABase_for_Building'>Alien::Base for Building</a>
      <li class='indexItem indexItem3'><a href='#Alien%3A%3ABase_for_Run-Time_Provision'>Alien::Base for Run-Time Provision</a>
    </ul>
  </ul>
  <li class='indexItem indexItem1'><a href='#EXAMPLES'>EXAMPLES</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Alien::Base::ModuleBuild::Authoring - Authoring an <code>Alien::</code> module using Alien::Base::ModuleBuild</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION</a></h1>

<p>version 1.17</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p><b>NOTE</b>: Please consider for new development of <a href="/pod/Alien.html" class="podlinkpod"
>Alien</a>s that you use <a href="/pod/Alien/Build.html" class="podlinkpod"
>Alien::Build</a> and <a href="/pod/alienfile.html" class="podlinkpod"
>alienfile</a> instead.
Like <a href="/pod/Alien/Base/ModuleBuild.html" class="podlinkpod"
>Alien::Base::ModuleBuild</a> they work with <a href="/pod/Alien/Base.html" class="podlinkpod"
>Alien::Base</a>.
Unlike <a href="/pod/Alien/Base/ModuleBuild.html" class="podlinkpod"
>Alien::Base::ModuleBuild</a> they are more easily customized and handle a number of corner cases better.
For a good place to start,
please see <a href="/pod/Alien/Build/Manual/AlienAuthor.html" class="podlinkpod"
>Alien::Build::Manual::AlienAuthor</a>.
Although the Alien-Base / Alien-Build team will continue to maintain this module,
(we will continue to fix bugs where appropriate),
we aren&#39;t adding any new features to this module.</p>

<p>Congratulations!
You have made the decision to help the Perl community by providing a C library via CPAN.
The <a href="/pod/Alien.html" class="podlinkpod"
>Alien</a> namespace has been instrumental in providing C libraries for many years,
but authoring those modules has been a commitment that most authors weren&#39;t willing to take on.
<a href="/pod/Alien/Base.html" class="podlinkpod"
>Alien::Base</a> tries to ease that pain by providing most of the needed functionality; usually authors should only need a little boilerplate and configuration!</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="STATUS"
>STATUS</a></h1>

<p><a href="/pod/Alien/Base.html" class="podlinkpod"
>Alien::Base</a> is under active development.
The API is relatively stable,
although breaking changes may be introduced if the rewards are deemed greater than the pains that they produce.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="ECOSYSTEM"
>ECOSYSTEM</a></h1>

<p>The <a href="/pod/Alien/Base.html" class="podlinkpod"
>Alien::Base</a> ecosystem is made up of several elements.
Some of these elements are the base classes in the distribution itself.
Of course,
no ecosystem is complete without inhabitants,
therefore,
it is also important to consider the users of these base classes.
This documentation will assume that you are writing <code>Alien::MyLibrary</code> which provides <em>libmylibrary.so</em>.
Further it will assume that you or someone else is going to use this module/library to write <code>Some::Module::MyLibrary</code>.
Finally an end user might use that module to write <em>myscript.pl</em>.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Alien::Base::ModuleBuild"
>Alien::Base::ModuleBuild</a></h2>

<p><a href="/pod/Alien/Base/ModuleBuild.html" class="podlinkpod"
>Alien::Base::ModuleBuild</a> provides a base class,
utility methods and configuration handling for the build/install phase of the library.
It is itself a subclass of <a href="https://metacpan.org/pod/Module%3A%3ABuild" class="podlinkpod"
>Module::Build</a>,
which is what supports the building and installing of the surrounding <code>Alien::</code> module.
<code>Alien::MyLibrary</code>&#39;s <em>Build.PL</em> file will use <a href="/pod/Alien/Base/ModuleBuild.html" class="podlinkpod"
>Alien::Base::ModuleBuild</a> to create its builder object.</p>

<pre class="sh_perl"> # file: Alien-MyLibrary/Build.PL
 use Alien::Base::ModuleBuild;
 my $builder = Alien::Base::ModuleBuild-&#62;new(...);
 $builder-&#62;create_build_script;</pre>

<p>This is just like you would do for <a href="https://metacpan.org/pod/Module%3A%3ABuild" class="podlinkpod"
>Module::Build</a>, except that there will be a few additional configuration parameters (see <a href="/pod/Alien/Base/ModuleBuild/API.html" class="podlinkpod"
>Alien::Base::ModuleBuild::API</a>).</p>

<p><a href="/pod/Alien/Base/ModuleBuild.html" class="podlinkpod"
>Alien::Base::ModuleBuild</a> adds the additional build actions <code>alien_code</code> and <code>alien_install</code>. These actions need never be run directly, the usual <code>build</code> action (usually seen as <code>./Build</code>) and <code>install</code> (<code>./Build install</code>) will call them for you. The <code>alien_code</code> action is responsible for finding, downloading, extracting and building the external library (the commands specified in builder parameter <code>alien_build_commands</code>). The <code>alien_install</code> action is responsible for installing the library into its final destination.</p>

<p>The <code>./Build test</code> command will invoke any library tests specified in <code>alien_test_commands</code>, though none are defined by default. Finally <code>./Build install</code> will invoke whatever <code>alien_install_commands</code> were specified.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Alien::Base"
>Alien::Base</a></h2>

<p><a href="/pod/Alien/Base.html" class="podlinkpod"
>Alien::Base</a> is the base class of <code>Alien::MyLibrary</code>. In this context, <a href="/pod/Alien/Base.html" class="podlinkpod"
>Alien::Base</a> has two distinct uses. First it is used by <code>Alien::MyLibrary</code> to provide the build information/flags for building <code>Some::Module::MyLibrary</code>. Secondly it is used (again through <code>Alien::MyLibrary</code>) to provide run-time access to <em>libmylibrary.so</em> to <code>Some::Module::MyLibrary</code>.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Alien::Base_for_Building"
>Alien::Base for Building</a></h3>

<p><code>Alien::MyLibrary</code> is called by <code>Some::Library::MyLibrary</code>&#39;s build script, either <em>Build.PL</em> or <em>Makefile.PL</em>. Most of the functionality can be utilized through class method calls, though creating an object can save a few keystrokes.</p>

<pre class="sh_perl"> # file: Some-Module-MyLibrary/Build.PL
 use Module::Build;
 use Alien::MyLibrary;
 
 my $alien = Alien::MyLibrary-&#62;new;
 my $builder = Module::Build-&#62;new(
   ...
   extra_compiler_flags =&#62; $alien-&#62;cflags(),
   extra_linker_flags   =&#62; $alien-&#62;libs(),
 );
 $builder-&#62;create_build_script;</pre>

<p>Additional information can be gotten from the <code>config</code> method.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Alien::Base_for_Run-Time_Provision"
>Alien::Base for Run-Time Provision</a></h3>

<p><code>Alien::MyLibrary</code> must be a subclass of <a href="/pod/Alien/Base.html" class="podlinkpod"
>Alien::Base</a>. This provides the <code>import</code> method, which does the run-time provisioning so that when the XS file is loaded, it can find <em>libmylibrary.so</em>. The <code>import</code> method does this by pre-loading the library via <code>DynaLoader::dl_load_file</code> which is a platform-independent wrapper for <code>dlopen</code> or your system&#39;s equivalent. It no longer appends to <code>$ENV{LD_RUN_PATH}</code>.</p>

<pre class="sh_perl"> # file: Alien-MyLibrary/lib/Alien/MyLibrary.pm
 package Alien::MyLibrary;
 
 use parent &#39;Alien::Base&#39;;
 
 1;</pre>

<p>Finally, <code>Alien::MyLibrary</code> must also be called by <code>Some::Library::MyLibrary</code> before <code>DynaLoader::bootstrap</code> or <code>XSLoader::load</code>. The <code>use</code> directive is recommended, however if you must use <code>require</code> then be sure to call the <code>import</code> method too. Without this <code>import</code> call, the loader doesn&#39;t know where to find <em>libmylibrary.so</em>.</p>

<pre class="sh_perl"> # file: Some-Module-MyLibrary/lib/Some/Module/MyLibrary.pm
 package Some::Module::MyLibrary;
 
 use Alien::MyLibrary;
 our $VERSION = &#39;0.54&#39;;
 
 require XSLoader;
 XSLoader::load(&#39;Some::Module::MyLibrary&#39;, $VERSION);
 
 # your code</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="EXAMPLES"
>EXAMPLES</a></h1>

<p>The example code that was housed in this distribution during alpha phase has been moved to two different CPAN distributions. Those are:</p>

<ul>
<li><a href="/pod/Acme/Alien/DontPanic.html" class="podlinkpod"
>Acme::Alien::DontPanic</a> -- An example <code>Alien::</code> module which provides <em>libdontpanic.so</em>. It provides the C function <code>answer</code> which is simply:
<pre class="sh_perl"> int answer () { return 42 }</pre>
</li>

<li><a href="/pod/Acme/Ford/Prefect.html" class="podlinkpod"
>Acme::Ford::Prefect</a> -- An XS module which provides the Perl-level access to <code>answer</code>. It relies on <em>libdontpanic.so</em> and uses <a href="/pod/Acme/Alien/DontPanic.html" class="podlinkpod"
>Acme::Alien::DontPanic</a> to locate/load it.</li>
</ul>

<p>Additionally, there exist in-production <code>Alien::</code> distributions that serve as de-facto tests of <a href="/pod/Alien/Base.html" class="podlinkpod"
>Alien::Base</a>&#39;s networking components:</p>

<ul>
<li><a href="/pod/Alien/LibYAML.html" class="podlinkpod"
>Alien::LibYAML</a> -- Builds and installs <em>libyaml</em>, acquiring the library archive from its hosted location via <code>Alien::Base::Repository::HTTP</code>.</li>

<li><a href="/pod/Alien/GSL.html" class="podlinkpod"
>Alien::GSL</a> -- Builds and installs <em>libgsl</em>, acquiring the library source archive via <code>Alien::Base::Repository::FTP</code>.</li>

<li><a href="/pod/Alien/gmake.html" class="podlinkpod"
>Alien::gmake</a> -- Builds and installs GNU make. Rather than being a library, this is a tool used to build other tools and libraries. It is useful for other Alien modules that require the GNU version of make. It also demonstrates the use of <a href="/pod/Alien/Base.html" class="podlinkpod"
>Alien::Base</a> for providing tools rather than libraries.</li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<ul>
<li><a href="https://metacpan.org/pod/Module%3A%3ABuild" class="podlinkpod"
>Module::Build</a></li>

<li><a href="/pod/Alien.html" class="podlinkpod"
>Alien</a></li>

<li><a href="/pod/Alien/Base.html" class="podlinkpod"
>Alien::Base</a></li>

<li><a href="/pod/Alien/Base/FAQ.html" class="podlinkpod"
>Alien::Base::FAQ</a></li>
</ul>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Original author: Joel A Berger &#60;joel.a.berger@gmail.com&#62;</p>

<p>Current maintainer: Graham Ollis &#60;plicease@cpan.org&#62;</p>

<p>Contributors:</p>

<p>David Mertens (run4flat)</p>

<p>Mark Nunberg (mordy, mnunberg)</p>

<p>Christian Walde (Mithaldu)</p>

<p>Brian Wightman (MidLifeXis)</p>

<p>Graham Ollis (plicease)</p>

<p>Zaki Mughal (zmughal)</p>

<p>mohawk2</p>

<p>Vikas N Kumar (vikasnkumar)</p>

<p>Flavio Poletti (polettix)</p>

<p>Salvador Fandi&#241;o (salva)</p>

<p>Gianni Ceccarelli (dakkar)</p>

<p>Pavel Shaydo (zwon, trinitum)</p>

<p>Kang-min Liu (&#21129;&#24247;&#27665;, gugod)</p>

<p>Nicholas Shipp (nshp)</p>

<p>Petr P&#237;sa&#345; (ppisar)</p>

<p>Alberto Sim&#245;es (ambs)</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>This software is copyright (c) 2012-2022 by Joel A Berger.</p>

<p>This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</p>


    <div class="nx-footer">
      <p>
        [
            <a href="https://wdlabs.com">wdlabs.com</a> |
            <a href="https://alienfile.org">alienfile.org</a> |
            <a href="https://pl.atypus.org">pl.atypus.org</a> |
            <a href="https://perlwasm.github.io">perlwasm</a> |
            <a href="https://uperl.github.io">uperl</a>
        ]
        Copyright &copy; 2022 Graham Ollis
      </p>
    </div>
  </body>
</html>
