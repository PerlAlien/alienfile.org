<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Alien::MSYS</title>
    <script type="text/javascript" src="https://shjs.wdlabs.com/sh_main.min.js"></script>
    <script type="text/javascript" src="https://shjs.wdlabs.com/lang/sh_perl.min.js"></script>
    <link type="text/css" rel="stylesheet" href="https://shjs.wdlabs.com/css/sh_acid.css">
    <link type="text/css" rel="stylesheet" href="/css/default.css">
  </head>
  <body onload="sh_highlightDocument();">
    <div class="nx-header-flag-1"></div>
    <div class="nx-header-flag-2"></div>
    <div class="nx-header-title"><a href="/">ðŸŒ»</a> <a href="/pod/">ðŸ“–</a> <a href="/pod/Alien.html">Alien</a>::MSYS</div>
    <!--Alien::MSYS--><a name='___top' class='dummyTopAnchor' ></a>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#VERSION'>VERSION</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#FUNCTIONS'>FUNCTIONS</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#msys'>msys</a>
    <li class='indexItem indexItem2'><a href='#msys_run'>msys_run</a>
    <li class='indexItem indexItem2'><a href='#msys_path'>msys_path</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#CAVEATS'>CAVEATS</a>
  <li class='indexItem indexItem1'><a href='#AUTHOR'>AUTHOR</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT_AND_LICENSE'>COPYRIGHT AND LICENSE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Alien::MSYS - Tools required for GNU style configure scripts on Windows</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="VERSION"
>VERSION</a></h1>

<p>version 0.15</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p>from Perl:</p>

<pre class="sh_perl"> use Alien::MSYS;
 # runs uname from MSYS
 my $uname = msys { `uname` };</pre>

<p>From Prompt/Makefile</p>

<pre class="sh_perl"> C:\&#62; perl -MAlien::MSYS -e Alien::MSYS::msys_run uname</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>MSYS provides minimal shell and POSIX tools on Windows to enable GNU style configure scripts to run (the type usually generated by <code>autoconf</code>). This module aims to provide an interface for using MSYS on Windows and act as a no-op on Unix like operating systems which already have that capability. If you use this module, I recommend that you list this as a prerequisite only during MSWin32 installs.</p>

<p>When installing, this distribution will look for an existing <code>MSYS</code> using the following methods in this order:</p>

<dl>
<dt><a name="environment_variable_ALIEN_INSTALL_TYPE_or_ALIEN_MSYS_INSTALL_TYPE"
>environment variable <code>ALIEN_INSTALL_TYPE</code> or <code>ALIEN_MSYS_INSTALL_TYPE</code></a></dt>

<dd>
<p>If set to <code>share</code> a system install will not be attempted. If set to <code>system</code> then a share install will not be attempted.</p>

<dt><a name="environment_variable_PERL_ALIEN_MSYS_BIN"
>environment variable <code>PERL_ALIEN_MSYS_BIN</code></a></dt>

<dd>
<p>If set, this environment variable should be set to the root of <code>MSYS</code> (NOT <code>MinGW</code>). For example, if you have <code>MinGW</code> / <code>MSYS</code> installed on <code>D:</code> you might use this:</p>

<pre class="sh_perl"> C:\&#62; set PERL_ALIEN_MSYS_BIN=D:\MinGW\msys\1.0\bin</pre>

<p>Keep in mind that this environment variable is consulted during both install and at run-time, so it is advisable to set this in the System Properties control panel.</p>

<dt><a name="search_PATH_for_mingw-get.exe"
>search <code>PATH</code> for <code>mingw-get.exe</code></a></dt>

<dd>
<p>Second, <a href="/pod/Alien/MSYS.html" class="podlinkpod"
>Alien::MSYS</a> searches the <code>PATH</code> environment variable for the <code>mingw-get.exe</code> program, which is a common method for installing <code>MinGW</code> and <code>MSYS</code>. From there if it can deduce the location of <code>MSYS</code> it will use that.</p>

<dt><a name="try_C:\MinGW\msys\1.0\bin"
>try <code>C:\MinGW\msys\1.0\bin</code></a></dt>

<dd>
<p>Next, <a href="/pod/Alien/MSYS.html" class="podlinkpod"
>Alien::MSYS</a> tries the default install location.</p>

<dt><a name="Use_desktop_shortcut_for_MinGW_Installer"
>Use desktop shortcut for <code>MinGW Installer</code></a></dt>

<dd>
<p>Finally, <a href="/pod/Alien/MSYS.html" class="podlinkpod"
>Alien::MSYS</a> will try to find <code>MSYS</code> from the desktop shortcut created by the GUI installer for <code>MinGW</code>. This method only works if you already have <a href="https://metacpan.org/pod/Win32%3A%3AShortcut" class="podlinkpod"
>Win32::Shortcut</a> installed, as it is an optional dependency.</p>
</dd>
</dl>

<p>If <code>MSYS</code> cannot be found using any of these methods, then it will download and install <code>MSYS</code> in this distribution&#39;s share directory.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="FUNCTIONS"
>FUNCTIONS</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="msys"
>msys</a></h2>

<pre class="sh_perl"> # get the uname from MSYS
 my $uname = msys { `uanem` };
 
 # run with GNU make from MSYS instead of
 # dmake from Strawberry Perl
 msys { system &#39;make&#39; };</pre>

<p>This function takes a single argument, a code reference, and runs it with the correctly set environment so that calls to the system function or the qx quote like operator will use MSYS instead of the default environment.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="msys_run"
>msys_run</a></h2>

<pre class="sh_perl"> # pass command through @ARGV
 C:\&#62; perl -MAlien::MSYS -e Alien::MSYS::msys_run uname
 
 # pass command through @_
 C:\&#62; perl -MAlien::MSYS -e &#34;Alien::MSYS::msys_run &#39;make&#39;; Alien::MSYS::msys_run &#39;make install&#39;&#34;</pre>

<p>This function runs a command with the MSYS environment. It gets the command and arguments either as passed to it, or if none are passed the the command is expected to be in @ARGV.</p>

<p>If the command fails then it will <a href="https://metacpan.org/pod/perlfunc%23exit" class="podlinkpod"
>exit</a> with a non-zero error code. This is useful, in the second example above if either <code>make</code> or <code>make install</code> fails, then the whole command will fail, also <code>make install</code> will not be attempted unless <code>make</code> succeeds.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="msys_path"
>msys_path</a></h2>

<p>This function returns the full path to the MSYS bin directory.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="CAVEATS"
>CAVEATS</a></h1>

<p>This <a href="/pod/Alien.html" class="podlinkpod"
>Alien</a> is big and slow to install. I am aware this is an annoying problem. It is also the only reliable way (that I know of) to install packages from source that use autotools on Strawberry or Visual C++ Perl. Here are some things that you can do to avoid this painful cost:</p>

<dl>
<dt><a name="Use_the_system_library_if_possible"
>Use the system library if possible</a></dt>

<dd>
<p>The <a href="/pod/Alien/Build.html" class="podlinkpod"
>Alien::Build</a> system is usually smart enough to find the system library if it is available. <a href="/pod/Alien/MSYS.html" class="podlinkpod"
>Alien::MSYS</a> is usually only necessary for so called <code>share</code> installs.</p>

<dt><a name="Pre-install_MSYS"
>Pre-install MSYS</a></dt>

<dd>
<p>As mentioned above if you preinstall MSYS and set the <code>PERL_ALIEN_MSYS_BIN</code> environment variable, then you will save yourself some time if you use multiple installs of Perl like I do.</p>

<dt><a name="Use_another_build_system"
>Use another build system</a></dt>

<dd>
<p>Some projects will provide a makefile that will work with GNU Make and <code>cmd.exe</code> that you can build without MSYS. An example of an Alien that takes advantage of this is <a href="https://metacpan.org/pod/Alien%3A%3Alibuv" class="podlinkpod"
>Alien::libuv</a>.</p>

<p>Some projects provide both autoconf and CMake. Although using CMake reliably requires <a href="/pod/Alien/cmake3.html" class="podlinkpod"
>Alien::cmake3</a> for <code>share</code> installs, it is much much lighter than <a href="/pod/Alien/MSYS.html" class="podlinkpod"
>Alien::MSYS</a>.</p>

<p>Also obviously you can open a ticket, or make a pull request with the project that you are alienizing to support build systems that don&#39;t suck as much as autoconf.</p>

<dt><a name="Use_MSYS2"
>Use MSYS2</a></dt>

<dd>
<p>Strawberry Perl is convenient for building XS modules without any dependencies or just dependencies on the small number of libraries that come bundled with Strawberry Perl. It is very very painful in my opinion if you depend on libraries that are not bundled, which is why this Alien exists. There is an alternative though.</p>

<p>MSYS2 / MinGW provides a MSWin32 Perl as part of a Linux / open source like package that provides probably all of the libraries that you might want to use as dependencies, and if it doesn&#39;t you can build much easier than with Strawberry + Alien::MSYS.</p>

<p>There are some notes here:</p>

<p><a href="https://project-renard.github.io/doc/development/meeting-log/posts/2016/05/03/windows-build-with-msys2/" class="podlinkurl"
>https://project-renard.github.io/doc/development/meeting-log/posts/2016/05/03/windows-build-with-msys2/</a></p>

<p>On using the MSYS2 / MinGW / MSWin32 Perl from the MSYS2 project.</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHOR"
>AUTHOR</a></h1>

<p>Author: Graham Ollis &#60;plicease@cpan.org&#62;</p>

<p>Contributors:</p>

<p>Shawn Laffan (SLAFFAN, shawnlaffan)</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT_AND_LICENSE"
>COPYRIGHT AND LICENSE</a></h1>

<p>This software is copyright (c) 2013-2022 by Graham Ollis.</p>

<p>This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5 programming language system itself.</p>


    <div class="nx-footer">
      <p>[
        <a href="https://alienfile.org">alienfile.org</a> |
        <a href="https://pl.atypus.org">pl.atypus.org</a> |
        <a href="https://perlwasm.github.io">perlwasm</a> |
        <a href="https://uperl.github.io">uperl</a>
      ] Copyright &copy; 2022 Graham Ollis</p>
    </div>
  </body>
</html>
